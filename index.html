<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title> Ayhan ‚ù§Ô∏è Song√ºl </title>
<link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<div id="loadingScreen">
  <div class="loaderHeart">‚ù§Ô∏è</div>
  <div class="loadingText"> y√ºkleniyor... </div>
  <div class="loadingProgress">
    <div class="progressBar"></div>
  </div>
</div>

<style>
  * {
    box-sizing: border-box;
  }
  
  #loadingScreen {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    background: linear-gradient(135deg, #fceabb, #f8b500);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    font-family: 'Baloo 2', cursive;
  }

  .loaderHeart {
    font-size: 5rem;
    animation: pulse 1.2s infinite;
    margin-bottom: 20px;
  }

  @keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 0.7; }
    50% { transform: scale(1.4); opacity: 1; }
  }

  .loadingText {
    margin-bottom: 30px;
    font-size: 1.5rem;
    color: #d6336c;
    font-weight: bold;
    text-align: center;
  }

  .loadingProgress {
    width: 300px;
    height: 8px;
    background: rgba(214, 51, 108, 0.3);
    border-radius: 4px;
    overflow: hidden;
  }

  .progressBar {
    height: 100%;
    background: #d6336c;
    width: 0%;
    animation: loading 3s ease-out forwards;
  }

  @keyframes loading {
    to { width: 100%; }
  }

  body {
    margin: 0; padding: 0;
    background: linear-gradient(135deg, #fceabb, #f8b500);
    font-family: 'Baloo 2', cursive, sans-serif;
    min-height: 100vh;
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    user-select: none;
    overflow-x: hidden;
    position: relative;
  }

  #scoreDisplay {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(214, 51, 108, 0.9);
    color: white;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: bold;
    font-size: 1.1rem;
    z-index: 100;
    box-shadow: 0 4px 15px rgba(214, 51, 108, 0.3);
  }

  #message {
    font-size: 1.9rem;
    margin-bottom: 20px;
    color: #d6336c;
    font-weight: 700;
    text-align: center;
    min-height: 80px;
    transition: opacity 0.3s ease;
    padding: 0 20px;
  }

  #heart {
    font-size: 90px;
    color: #d6336c;
    margin-bottom: 25px;
    user-select: none;
    transition: transform 0.5s ease, color 1s ease;
    animation: heartPulse 2s infinite;
  }

  @keyframes heartPulse {
    0%, 100% { transform: scale(1); color: #d6336c; }
    50% { transform: scale(1.3); color: #ff356d; }
  }

  .btn-container {
    display: flex;
    gap: 30px;
    margin-bottom: 30px;
    flex-wrap: wrap;
    justify-content: center;
  }

  button {
    padding: 16px 36px;
    font-size: 1.3rem;
    border-radius: 30px;
    border: none;
    cursor: pointer;
    font-weight: 700;
    box-shadow: 0 6px 15px rgba(214, 51, 108, 0.7);
    user-select: none;
    position: relative;
    background: #d6336c;
    color: white;
    transition: all 0.3s ease;
    font-family: 'Baloo 2', cursive;
  }

  button:hover:not(:disabled) {
    background: #b02a56;
    transform: scale(1.05);
  }

  button:active {
    transform: scale(0.98);
  }

  #btnLeave {
    background: #555;
  }

  #btnLeave:hover:not(:disabled) {
    background: #333;
  }

  #finalHeart {
    font-size: 90px;
    color: #d6336c;
    opacity: 0;
    user-select: none;
    position: relative;
    z-index: 10;
    transition: opacity 0.7s ease;
    animation: heartPulse 2s infinite;
  }

  #road {
    position: fixed;
    bottom: 0; left: 0;
    width: 100%;
    height: 120px;
    background: linear-gradient(to bottom, #8B5E3C, #654321);
    overflow: hidden;
    z-index: 5;
    border-top: 5px solid #5a4037;
  }

  .animal {
    position: absolute;
    bottom: 15px;
    width: 80px;
    height: 80px;
    user-select: none;
    animation-timing-function: linear;
    filter: drop-shadow(3px 3px 6px rgba(0,0,0,0.3));
  }

  #cow {
    left: -100px;
    animation: walkAnimal 15s linear infinite;
    animation-delay: 0s;
  }

  #dog {
    left: -100px;
    animation: walkAnimal 12s linear infinite;
    animation-delay: 3s;
  }

  #chicken {
    left: -100px;
    animation: walkAnimal 10s linear infinite;
    animation-delay: 6s;
  }

  #donkey {
    left: -100px;
    animation: walkAnimal 18s linear infinite;
    animation-delay: 9s;
  }

  @keyframes walkAnimal {
    0% { left: -100px; }
    100% { left: calc(100vw + 100px); }
  }

  .game-area {
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    margin: 20px;
    min-width: 300px;
    box-shadow: 0 8px 32px rgba(214, 51, 108, 0.2);
  }

  #numberGameArea, #memoryGameArea, #catFeedingArea, #carDrivingArea, #archeryGameArea, #secretArea {
    display: none;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    backdrop-filter: blur(10px);
    margin: 20px;
    min-width: 300px;
    box-shadow: 0 8px 32px rgba(214, 51, 108, 0.2);
  }

  #numberOptions {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    margin: 20px 0;
  }

  #numberOptions button {
    margin: 0;
    background: #6f42c1;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    padding: 0;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #numberOptions button:hover {
    background: #5a32a3;
  }

  #memoryGameGrid {
    display: grid;
    grid-template-columns: repeat(4, 80px);
    grid-gap: 10px;
    perspective: 1000px;
    margin: 20px 0;
  }

  .memory-card {
    width: 80px;
    height: 80px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.5s;
    cursor: pointer;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
  }

  .memory-card.flip {
    transform: rotateY(180deg);
  }

  .front-face, .back-face {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2.5rem;
    border-radius: 8px;
  }

  .front-face {
    background: linear-gradient(135deg, #ffde59, #ff9500);
  }

  .back-face {
    background: linear-gradient(135deg, #ffffff, #f0f0f0);
    transform: rotateY(180deg);
  }

  #catContainer {
    position: relative;
    margin: 20px 0;
  }

  #cat {
    font-size: 80px;
    animation: catBounce 2s infinite;
    cursor: pointer;
    transition: transform 0.3s ease;
  }

  @keyframes catBounce {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  #cat:hover {
    transform: scale(1.1);
  }

  #foodOptions {
    display: flex;
    gap: 15px;
    margin: 20px 0;
    flex-wrap: wrap;
    justify-content: center;
  }

  .food-item {
    font-size: 40px;
    padding: 10px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 15px;
    cursor: pointer;
    transition: all 0.3s ease;
    border: 3px solid transparent;
  }

  .food-item:hover {
    background: rgba(255, 255, 255, 0.4);
    transform: scale(1.1);
  }

  .food-item.selected {
    border-color: #d6336c;
    background: rgba(214, 51, 108, 0.2);
  }

  #catHunger {
    width: 200px;
    height: 20px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 10px;
    overflow: hidden;
    margin: 15px 0;
    border: 2px solid #d6336c;
  }

  #hungerBar {
    height: 100%;
    background: linear-gradient(90deg, #ff4757, #ffa502, #2ed573);
    width: 30%;
    transition: width 0.5s ease;
    border-radius: 8px;
  }

  #carGameContainer {
    position: relative;
    width: 300px;
    height: 400px;
    background: linear-gradient(180deg, #87CEEB 0%, #98FB98 70%, #8B5E3C 100%);
    border-radius: 15px;
    overflow: hidden;
    margin: 20px 0;
    border: 3px solid #d6336c;
  }

  #road-lines {
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 4px;
    height: 100%;
    background: repeating-linear-gradient(
      to bottom,
      white 0px,
      white 20px,
      transparent 20px,
      transparent 40px
    );
    animation: roadMove 1s linear infinite;
  }

  @keyframes roadMove {
    from { transform: translateX(-50%) translateY(-40px); }
    to { transform: translateX(-50%) translateY(0px); }
  }

  #playerCar {
    position: absolute;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%);
    font-size: 40px;
    transition: left 0.3s ease;
    z-index: 10;
  }

  #carControls {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    justify-content: center;
  }

  #carControls button {
    background: #28a745;
    font-size: 1.5rem;
    padding: 15px 25px;
    border-radius: 50%;
  }

  #carControls button:hover {
    background: #1e7e34;
  }

  #carControls button:disabled {
    background: #6c757d;
    cursor: not-allowed;
  }

  .obstacle {
    position: absolute;
    font-size: 30px;
    animation: obstacleMove 3s linear infinite;
    z-index: 5;
  }

  @keyframes obstacleMove {
    from { top: -50px; }
    to { top: 450px; }
  }

  #carGameOver {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background: rgba(255, 255, 255, 0.95);
    padding: 20px;
    border-radius: 15px;
    text-align: center;
    display: none;
    z-index: 100;
    border: 3px solid #d6336c;
  }

  #carRestartBtn {
    background: #d6336c;
    margin-top: 10px;
    padding: 10px 20px;
    font-size: 1.1rem;
  }

  #archeryContainer {
    position: relative;
    width: 350px;
    height: 450px;
    background: linear-gradient(180deg, #87CEEB 0%, #98FB98 50%, #90EE90 100%);
    border-radius: 15px;
    overflow: hidden;
    margin: 20px 0;
    border: 3px solid #d6336c;
  }

  #eros {
    position: absolute;
    bottom: 20px;
    left: 20px;
    font-size: 50px;
    animation: erosFloat 3s ease-in-out infinite;
    user-select: none;
  }

  @keyframes erosFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-10px); }
  }

  #bow {
    position: absolute;
    bottom: 40px;
    left: 80px;
    font-size: 40px;
    cursor: pointer;
    transition: transform 0.3s ease;
    user-select: none;
  }

  #bow:hover {
    transform: scale(1.1);
  }

  .heart-target {
    position: absolute;
    font-size: 40px;
    cursor: crosshair;
    animation: heartFloat 4s ease-in-out infinite;
    user-select: none;
    transition: all 0.3s ease;
  }

  .heart-target:hover {
    transform: scale(1.2);
  }

  @keyframes heartFloat {
    0%, 100% { transform: translateY(0) translateX(0); }
    25% { transform: translateY(-20px) translateX(10px); }
    50% { transform: translateY(-10px) translateX(-10px); }
    75% { transform: translateY(-15px) translateX(5px); }
  }

  .arrow {
    position: absolute;
    font-size: 25px;
    pointer-events: none;
    animation: arrowFly 1.5s ease-out forwards;
    z-index: 10;
  }

  @keyframes arrowFly {
    0% {
      transform: translate(0, 0) rotate(45deg);
      opacity: 1;
    }
    100% {
      transform: translate(var(--target-x), var(--target-y)) rotate(45deg);
      opacity: 0.8;
    }
  }

  #archeryScore {
    text-align: center;
    margin: 15px 0;
    font-weight: bold;
    color: #d6336c;
  }

  #archeryControls {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 15px;
  }

  #archeryControls button {
    background: #e91e63;
    font-size: 1.2rem;
    padding: 12px 24px;
  }

  #archeryControls button:hover {
    background: #c2185b;
  }

  .love-explosion {
    position: absolute;
    pointer-events: none;
    z-index: 20;
    animation: loveExplosion 2s ease-out forwards;
  }

  @keyframes loveExplosion {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    50% {
      transform: scale(1.5);
      opacity: 0.8;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  .floating-heart {
    position: fixed;
    font-size: 30px;
    color: #ff356d;
    pointer-events: none;
    z-index: 1000;
    animation: floatUp 3s ease-out forwards;
  }

  @keyframes floatUp {
    0% {
      opacity: 1;
      transform: translateY(0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-100px) scale(1.5);
    }
  }

  .particle {
    position: fixed;
    width: 6px;
    height: 6px;
    background: #d6336c;
    border-radius: 50%;
    pointer-events: none;
    z-index: 1000;
    animation: particleFloat 2s ease-out forwards;
  }

  @keyframes particleFloat {
    0% {
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translate(var(--random-x), var(--random-y)) scale(0);
    }
  }

  #secretBtn {
    margin-top: 20px;
    background: #28a745;
    font-size: 1.2rem;
  }

  #secretBtn:hover {
    background: #1e7e34;
  }

  /* Confetti */
  #confettiCanvas {
    pointer-events: none;
    position: fixed;
    top: 0; left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 20;
  }

  #warning {
    position: fixed;
    top: 15%;
    left: 50%;
    transform: translateX(-50%);
    background: #ff356d;
    color: white;
    padding: 15px 30px;
    border-radius: 15px;
    font-weight: 700;
    font-size: 1.3rem;
    opacity: 0;
    transition: opacity 0.3s ease;
    z-index: 30;
    user-select: none;
    box-shadow: 0 8px 25px rgba(255, 53, 109, 0.4);
  }

  @media (max-width: 768px) {
    #message {
      font-size: 1.5rem;
      padding: 0 15px;
    }

    #heart {
      font-size: 70px;
    }

    button {
      padding: 12px 24px;
      font-size: 1.1rem;
    }

    .btn-container {
      gap: 15px;
      padding: 0 20px;
    }

    #memoryGameGrid {
      grid-template-columns: repeat(4, 70px);
      grid-gap: 8px;
    }

    .memory-card {
      width: 70px;
      height: 70px;
    }

    #carGameContainer {
      width: 250px;
      height: 350px;
    }

    #scoreDisplay {
      top: 10px;
      right: 10px;
      padding: 8px 15px;
      font-size: 1rem;
    }

    #archeryContainer {
      width: 300px;
      height: 400px;
    }
  }

  @media (max-width: 480px) {
    #numberOptions {
      grid-template-columns: repeat(5, 1fr);
      max-width: 300px;
    }

    #numberOptions button {
      width: 50px;
      height: 50px;
      font-size: 1.1rem;
    }

    #foodOptions {
      gap: 10px;
    }

    .food-item {
      font-size: 30px;
    }

    #carControls {
      gap: 15px;
    }

    #carControls button {
      padding: 12px 20px;
      font-size: 1.3rem;
    }
  }
</style>

<body>

<div id="scoreDisplay">‚ù§Ô∏è Puan: <span id="score">0</span></div>

<div id="message">Ba≈üla bakalƒ±m, sevgilim :)</div>
<div id="heart">‚ù§Ô∏è</div>

<div class="btn-container" id="mainButtons">
  <button id="btnLove">
    <i class="fas fa-heart"></i> a≈ükƒ±mm
  </button>
  <button id="btnLeave">
    <i class="fas fa-running"></i> eyw
  </button>
</div>

<div id="numberGameArea">
  <div style="text-align: center; margin-bottom: 20px;">
    <i class="fas fa-dice"></i> 1 ile 9 arasƒ±nda bir sayƒ± tut, ben tahmin etmeye √ßalƒ±≈üacaƒüƒ±m
  </div>
  <div id="numberOptions">
    <button data-number="1">1</button>
    <button data-number="2">2</button>
    <button data-number="3">3</button>
    <button data-number="4">4</button>
    <button data-number="5">5</button>
    <button data-number="6">6</button>
    <button data-number="7">7</button>
    <button data-number="8">8</button>
    <button data-number="9">9</button>
  </div>
  <div id="numberResult" style="margin-top:15px; font-weight:bold; color:#d6336c; text-align:center;"></div>
</div>

<div id="memoryGameArea">
  <div style="text-align: center; margin-bottom: 20px;">
    <i class="fas fa-brain"></i> Hafƒ±za Oyunu: E≈üle≈üenleri bul bakalƒ±ms
  </div>
  <div id="memoryGameGrid"></div>
  <div id="memoryGameMessage" style="margin-top:15px; font-weight:bold; color:#d6336c; text-align:center;"></div>
</div>

<div id="catFeedingArea">
  <div style="text-align: center; margin-bottom: 20px;">
    <i class="fas fa-cat"></i> Minik kedi hikayesi
  </div>
  <div id="catStory" style="margin-bottom: 20px; text-align: center; color: #d6336c; font-weight: 600; font-size: 1.1rem;">
    G√ºm√º≈ühanede a√ß bir kedi buldun... üê± hdi ona yardƒ±m edelim
  </div>
  <div id="catContainer">
    <div id="cat">üê±</div>
    <div id="catName" style="text-align: center; margin-top: 10px; font-weight: bold; color: #d6336c;">???</div>
  </div>
  <div style="text-align: center; margin-bottom: 10px;">A√ßlƒ±k seviyesi:</div>
  <div id="catHunger">
    <div id="hungerBar"></div>
  </div>
  <div id="foodOptions">
    <div class="food-item" data-food="fish">üêü</div>
    <div class="food-item" data-food="milk">ü•õ</div>
    <div class="food-item" data-food="meat">ü•©</div>
    <div class="food-item" data-food="treat">ü¶¥</div>
  </div>
  <div id="catFeedingMessage" style="margin-top:15px; font-weight:bold; color:#d6336c; text-align:center;"></div>
</div>

<div id="archeryGameArea">
  <div style="text-align: center; margin-bottom: 20px;">
    <i class="fas fa-heart"></i> Eros misali
  </div>
  <div id="archeryContainer">
    <div id="eros">üëº</div>
    <div id="bow">üèπ</div>
  </div>
  <div id="archeryScore">
    <div>Hedef: <span id="archeryTarget">0</span>/5</div>
    <div>Vuru≈ü: <span id="archeryHits">0</span></div>
  </div>
  <div id="archeryControls">
    <button id="shootArrow">
      <i class="fas fa-crosshairs"></i> hmm
    </button>
    <button id="newArcheryRound">
      <i class="fas fa-redo"></i> Yeni tur
    </button>
  </div>
  <div id="archeryMessage" style="margin-top:15px; font-weight:bold; color:#d6336c; text-align:center;"></div>
</div>

<div id="carDrivingArea">
  <div style="text-align: center; margin-bottom: 20px;">
    <i class="fas fa-car"></i> Ehliyet pratiƒüine ne dersin ? 
  </div>
  <div id="carGameContainer">
    <div id="road-lines"></div>
    <div id="playerCar">üöó</div>
    <div id="carGameOver">
      <h3 style="color: #d6336c; margin-bottom: 10px;">Oyun bitti bayy</h3>
      <div id="finalCarScore">Mesafeniz: 0m</div>
      <button id="carRestartBtn">Tekrar oyna</button>
    </div>
  </div>
  <div id="carControls">
    <button id="carLeft"><i class="fas fa-arrow-left"></i></button>
    <button id="carRight"><i class="fas fa-arrow-right"></i></button>
  </div>
  <div id="carScore" style="margin-top:15px; font-weight:bold; color:#d6336c; text-align:center;">Mesafe: 0m</div>
</div>

<div id="secretArea">
  <div style="text-align: center; margin-bottom: 20px;">
    üéâ S√ºrpriz üéâ mesaj b√∂l√ºm√º üéâ
  </div>
  <button id="secretBtn">
    <i class="fas fa-gift"></i> S√ºrpriz Mesajƒ± G√∂ster
  </button>
  <div id="secretMessage" style="margin-top:20px; font-weight:700; color:#28a745; text-align:center;"></div>
</div>

<div id="finalHeart">Ayhan ‚ù§Ô∏è Song√ºl</div>

<div id="road">
  <div id="cow" class="animal">üêÑ</div>
  <div id="dog" class="animal">üêï</div>
  <div id="chicken" class="animal">üêî</div>
  <div id="donkey" class="animal">ü´è</div>
</div>

<div id="warning">diƒüer ≈üƒ±kka mƒ± basmaya √ßalƒ±≈üƒ±yorsun yoksa ? :D üê±‚Äçüë§</div>

<canvas id="confettiCanvas"></canvas>

<script>
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('loadingScreen').style.display = 'none';
  }, 3500);
});

const gameState = {
  phase: 'main',
  messageIndex: 0,
  totalScore: 0,
  numberGameStep: 0,
  memoryMatchesFound: 0,
  catHunger: 30,
  catStoryStep: 0,
  catName: '',
  carDistance: 0,
  carPosition: 50,
  carGameActive: false,
  carObstacles: [],
  archeryHits: 0,
  archeryTarget: 5,
  archeryHearts: []
};

const elements = {
  message: document.getElementById('message'),
  heart: document.getElementById('heart'),
  btnLove: document.getElementById('btnLove'),
  btnLeave: document.getElementById('btnLeave'),
  mainButtons: document.getElementById('mainButtons'),
  finalHeart: document.getElementById('finalHeart'),
  warning: document.getElementById('warning'),
  scoreDisplay: document.getElementById('score'),
  
  numberGameArea: document.getElementById('numberGameArea'),
  numberOptions: document.getElementById('numberOptions'),
  numberResult: document.getElementById('numberResult'),
  
  memoryGameArea: document.getElementById('memoryGameArea'),
  memoryGameGrid: document.getElementById('memoryGameGrid'),
  memoryGameMessage: document.getElementById('memoryGameMessage'),
  
  catFeedingArea: document.getElementById('catFeedingArea'),
  cat: document.getElementById('cat'),
  catName: document.getElementById('catName'),
  catStory: document.getElementById('catStory'),
  hungerBar: document.getElementById('hungerBar'),
  foodOptions: document.getElementById('foodOptions'),
  catFeedingMessage: document.getElementById('catFeedingMessage'),
  
  carDrivingArea: document.getElementById('carDrivingArea'),
  carGameContainer: document.getElementById('carGameContainer'),
  playerCar: document.getElementById('playerCar'),
  carLeft: document.getElementById('carLeft'),
  carRight: document.getElementById('carRight'),
  carScore: document.getElementById('carScore'),
  carGameOver: document.getElementById('carGameOver'),
  carRestartBtn: document.getElementById('carRestartBtn'),
  finalCarScore: document.getElementById('finalCarScore'),
  
  archeryGameArea: document.getElementById('archeryGameArea'),
  archeryContainer: document.getElementById('archeryContainer'),
  eros: document.getElementById('eros'),
  bow: document.getElementById('bow'),
  shootArrow: document.getElementById('shootArrow'),
  newArcheryRound: document.getElementById('newArcheryRound'),
  archeryTarget: document.getElementById('archeryTarget'),
  archeryHits: document.getElementById('archeryHits'),
  archeryMessage: document.getElementById('archeryMessage'),
  
  secretArea: document.getElementById('secretArea'),
  secretBtn: document.getElementById('secretBtn'),
  secretMessage: document.getElementById('secretMessage'),
  
  confettiCanvas: document.getElementById('confettiCanvas'),
  road: document.getElementById('road')
};

const loveMessages = [
  "ƒ∞yi ki varsƒ±n! ‚ù§Ô∏è",
  "Seni √ßok seviyorum üíï",
  "benim bitanemm üíï",
  "Ayrƒ±ca okulu bƒ±rakmak yok, daha √ßok i≈üimiz var üòº",
  "Seninle her ≈üey √ßok g√ºzel üåπ"
];

function updateScore(points) {
  gameState.totalScore += points;
  elements.scoreDisplay.textContent = gameState.totalScore;
  createParticleEffect();
}

function createFloatingHeart(x, y) {
  const heart = document.createElement('div');
  heart.className = 'floating-heart';
  heart.textContent = '‚ù§Ô∏è';
  heart.style.left = x + 'px';
  heart.style.top = y + 'px';
  document.body.appendChild(heart);
  
  setTimeout(() => {
    heart.remove();
  }, 3000);
}

function createParticleEffect() {
  for (let i = 0; i < 8; i++) {
    const particle = document.createElement('div');
    particle.className = 'particle';
    particle.style.left = '50%';
    particle.style.top = '20px';
    
    const randomX = (Math.random() - 0.5) * 200;
    const randomY = (Math.random() - 0.5) * 200;
    particle.style.setProperty('--random-x', randomX + 'px');
    particle.style.setProperty('--random-y', randomY + 'px');
    
    document.body.appendChild(particle);
    
    setTimeout(() => {
      particle.remove();
    }, 2000);
  }
}

function animateHeart() {
  elements.heart.style.transform = 'scale(1.8)';
  setTimeout(() => {
    elements.heart.style.transform = 'scale(1)';
  }, 500);
}

function showWarning() {
  elements.warning.style.opacity = 1;
  setTimeout(() => {
    elements.warning.style.opacity = 0;
  }, 1500);
}

function hideAllGameAreas() {
  elements.numberGameArea.style.display = 'none';
  elements.memoryGameArea.style.display = 'none';
  elements.catFeedingArea.style.display = 'none';
  elements.carDrivingArea.style.display = 'none';
  elements.archeryGameArea.style.display = 'none';
  elements.secretArea.style.display = 'none';
}

let leaveBtnTimeout;
function moveLeaveButton() {
  const btn = elements.btnLeave;
  const maxX = window.innerWidth - btn.offsetWidth - 40;
  const maxY = window.innerHeight - btn.offsetHeight - 40;
  const x = Math.random() * Math.max(maxX, 0);
  const y = Math.random() * Math.max(maxY, 0);
  
  btn.style.position = 'fixed';
  btn.style.left = `${x}px`;
  btn.style.top = `${y}px`;
}

moveLeaveButton();

elements.btnLeave.addEventListener('mousemove', () => {
  if (Math.random() < 0.4) {
    moveLeaveButton();
    showWarning();
  } else {
    moveLeaveButton();
  }
});

elements.btnLeave.addEventListener('click', () => {
  moveLeaveButton();
  showWarning();
});

elements.btnLove.addEventListener('click', () => {
  if (gameState.phase === 'main') {
    if (gameState.messageIndex < loveMessages.length) {
      elements.message.style.opacity = 0;
      setTimeout(() => {
        elements.message.textContent = loveMessages[gameState.messageIndex];
        elements.message.style.opacity = 1;
        animateHeart();
        updateScore(10);
        gameState.messageIndex++;
      }, 300);
    } else {
      gameState.phase = 'numberGame';
      elements.mainButtons.style.display = 'none';
      elements.heart.style.opacity = 0;
      elements.message.textContent = "Sayƒ± tahmin oyununa ho≈ü geldin!";
      elements.numberGameArea.style.display = 'flex';
      elements.numberResult.textContent = '';
      gameState.numberGameStep = 0;
    }
  }
});

elements.numberOptions.addEventListener('click', (e) => {
  if (e.target.tagName === 'BUTTON' && gameState.phase === 'numberGame') {
    const chosen = Number(e.target.dataset.number);
    const guess = Math.floor(Math.random() * 9) + 1;
    
    if (guess === chosen) {
      elements.numberResult.textContent = `üéâ Doƒüru bildim kolaydƒ±! Sen ${chosen} tuttun. +20 puan!`;
      updateScore(20);
    } else {
      elements.numberResult.textContent = `ü§î Ben ${guess} dedim, sen ${chosen} tutmu≈üsun. +10 puan!`;
      updateScore(10);
    }
    
    gameState.numberGameStep++;
    if (gameState.numberGameStep >= 3) {
      setTimeout(() => {
        elements.numberGameArea.style.display = 'none';
        gameState.phase = 'memoryGame';
        elements.message.textContent = "Hafƒ±za oyununa ho≈ü geldin!";
        setupMemoryGame();
        elements.memoryGameArea.style.display = 'flex';
      }, 2000);
    }
  }
});

const cardsArray = ['üåπ', 'üåº', 'üê±', 'üçì', 'üåπ', 'üåº', 'üê±', 'üçì'];
let hasFlippedCard = false;
let lockBoard = false;
let firstCard, secondCard;

function shuffle(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
}

function setupMemoryGame() {
  shuffle(cardsArray);
  elements.memoryGameGrid.innerHTML = '';
  cardsArray.forEach(item => {
    const card = document.createElement('div');
    card.classList.add('memory-card');
    card.dataset.card = item;

    const frontFace = document.createElement('div');
    frontFace.classList.add('front-face');
    frontFace.innerHTML = '‚ùì';

    const backFace = document.createElement('div');
    backFace.classList.add('back-face');
    backFace.textContent = item;

    card.appendChild(frontFace);
    card.appendChild(backFace);
    elements.memoryGameGrid.appendChild(card);

    card.addEventListener('click', flipCard);
  });
}

function flipCard() {
  if (lockBoard) return;
  if (this === firstCard) return;

  this.classList.add('flip');

  if (!hasFlippedCard) {
    hasFlippedCard = true;
    firstCard = this;
    return;
  }

  secondCard = this;
  checkForMatch();
}

function checkForMatch() {
  let isMatch = firstCard.dataset.card === secondCard.dataset.card;
  
  if (isMatch) {
    disableCards();
    gameState.memoryMatchesFound++;
    updateScore(20);
    
    if (gameState.memoryMatchesFound === 4) {
      elements.memoryGameMessage.innerHTML = 'üéâ helal olsun';
      setTimeout(() => {
        elements.memoryGameArea.style.display = 'none';
        startCatFeedingGame();
      }, 2000);
    }
  } else {
    unflipCards();
  }
}

function disableCards() {
  firstCard.removeEventListener('click', flipCard);
  secondCard.removeEventListener('click', flipCard);
  resetBoard();
}

function unflipCards() {
  lockBoard = true;
  setTimeout(() => {
    firstCard.classList.remove('flip');
    secondCard.classList.remove('flip');
    resetBoard();
  }, 1500);
}

function resetBoard() {
  [hasFlippedCard, lockBoard] = [false, false];
  [firstCard, secondCard] = [null, null];
}

function startCatFeedingGame() {
  gameState.phase = 'catFeeding';
  gameState.catStoryStep = 0;
  elements.message.textContent = "G√ºm√º≈ühanedeki minik bir kedi";
  elements.catFeedingArea.style.display = 'flex';
  updateCatStory();
  updateHungerBar();
}

function updateCatStory() {
  const stories = [
    "Sokakta a√ß bir kedi buldun... üê± Hadi ona yardƒ±m edelim",
    "Kedi √ßok a√ßmƒ±≈ü g√∂r√ºn√ºyor. Ne versek acaba ?",
    "Kedi yava≈ü yava≈ü bizi sevmeye ba≈ülƒ±yor sanki ne dersin üòä",
    "Artƒ±k sana alƒ±≈ütƒ±. ƒ∞sim verelim mi ?",
    "Bu kediye 'S√ºtla√ß' diyelim mi ?  ü§ç"
  ];
  
  const names = ["???", "???", "Minik", "Sevimli", "S√ºtla√ß"];
  
  if (gameState.catStoryStep < stories.length) {
    elements.catStory.innerHTML = stories[gameState.catStoryStep];
    elements.catName.textContent = names[gameState.catStoryStep];
  }
}

function updateHungerBar() {
  elements.hungerBar.style.width = gameState.catHunger + '%';
  
  if (gameState.catHunger < 30) {
    elements.hungerBar.style.background = '#ff4757';
  } else if (gameState.catHunger < 70) {
    elements.hungerBar.style.background = '#ffa502';
  } else {
    elements.hungerBar.style.background = '#2ed573';
  }
}

elements.cat.addEventListener('click', () => {
  if (gameState.phase === 'catFeeding') {
    elements.cat.style.transform = 'scale(1.2)';
    setTimeout(() => {
      elements.cat.style.transform = 'scale(1)';
    }, 200);
    
    if (gameState.catHunger < 100) {
      elements.catFeedingMessage.innerHTML = 'üê± Miyav';
    } else {
      elements.catFeedingMessage.innerHTML = 'üò∏ Eyw kanka saƒüol';
    }
  }
});

elements.foodOptions.addEventListener('click', (e) => {
  if (e.target.classList.contains('food-item') && gameState.phase === 'catFeeding') {
    const foodType = e.target.dataset.food;
    const foodValues = {
      fish: 25,
      milk: 15,
      meat: 30,
      treat: 10
    };
    
    const hungerIncrease = foodValues[foodType];
    gameState.catHunger = Math.min(100, gameState.catHunger + hungerIncrease);
    updateHungerBar();
    updateScore(hungerIncrease);
    
    gameState.catStoryStep = Math.min(4, gameState.catStoryStep + 1);
    updateCatStory();

    e.target.style.transform = 'scale(1.3)';
    setTimeout(() => {
      e.target.style.transform = 'scale(1)';
    }, 200);
    
    const messages = {
      fish: 'üêü Uskumru balƒ±ƒüƒ± √ßok lezzetliydi  +25 tokluk puanƒ±',
      milk: 'ü•õ Laktozsuz S√ºt i√ßtim  +15 tokluk puanƒ±',
      meat: 'ü•© l√∂p l√∂p et  +30 tokluk',
      treat: 'ü¶¥ bu da oyuncaƒüƒ± +10 eƒülence puanƒ± ama a√ß ayƒ± oynamaz'
    };
    
    elements.catFeedingMessage.innerHTML = messages[foodType];
    
    if (gameState.catHunger >= 100) {
      setTimeout(() => {
        elements.catFeedingMessage.innerHTML = 'üòª S√ºtla√ß √ßok mutlu hadi ≈üidmi Eros amcaya yardƒ±m edelim.';
        setTimeout(() => {
          elements.catFeedingArea.style.display = 'none';
          startArcheryGame();
        }, 2000);
      }, 1000);
    }
  }
});

// Archery Game
function startArcheryGame() {
  gameState.phase = 'archery';
  elements.message.textContent = "Eros'un a≈ük oklarƒ±yla kalplere ni≈üan al ve vur";
  elements.archeryGameArea.style.display = 'flex';
  gameState.archeryHits = 0;
  gameState.archeryTarget = 5;
  gameState.archeryHearts = [];
  
  updateArcheryDisplay();
  createHeartTargets();
}

function createHeartTargets() {
  const existingHearts = elements.archeryContainer.querySelectorAll('.heart-target');
  existingHearts.forEach(heart => heart.remove());
  gameState.archeryHearts = [];

  for (let i = 0; i < 3; i++) {
    setTimeout(() => {
      createFloatingHeartTarget();
    }, i * 2000);
  }
  
  const heartInterval = setInterval(() => {
    if (gameState.phase === 'archery' && gameState.archeryHits < gameState.archeryTarget) {
      createFloatingHeartTarget();
    } else {
      clearInterval(heartInterval);
    }
  }, 4000);
}

function createFloatingHeartTarget() {
  const heart = document.createElement('div');
  heart.className = 'heart-target';
  heart.textContent = ['üíó', 'üíñ', 'üíù', 'üíï'][Math.floor(Math.random() * 4)];
  
  const x = Math.random() * 250 + 50;
  const y = Math.random() * 200 + 50;
  
  heart.style.left = x + 'px';
  heart.style.top = y + 'px';
  
  const heartData = {
    element: heart,
    x: x,
    y: y,
    hit: false
  };
  
  gameState.archeryHearts.push(heartData);
  elements.archeryContainer.appendChild(heart);
  
  heart.addEventListener('click', () => hitHeart(heartData));
  
  setTimeout(() => {
    if (!heartData.hit && heart.parentNode) {
      heart.remove();
      const index = gameState.archeryHearts.indexOf(heartData);
      if (index > -1) {
        gameState.archeryHearts.splice(index, 1);
      }
    }
  }, 8000);
}

function hitHeart(heartData) {
  if (heartData.hit) return;
  
  heartData.hit = true;
  gameState.archeryHits++;
  updateScore(25);
  
  createLoveExplosion(heartData.x, heartData.y);
  
  heartData.element.remove();
  
  updateArcheryDisplay();
  
  if (gameState.archeryHits >= gameState.archeryTarget) {
    setTimeout(() => {
      elements.archeryMessage.innerHTML = 'üèπ M√ºkemmel! T√ºm kalpleri vurdun! Araba oyununa ge√ßelim!';
      setTimeout(() => {
        elements.archeryGameArea.style.display = 'none';
        startCarGame();
      }, 2500);
    }, 1000);
  } else {
    const encouragements = [
      'üíò iyisin hee',
      'üíù helal bee',
      'üíñ A≈ük oku tam hedefte kalbimden vurdun',
      'üíï ≈üa≈üƒ±rtƒ±cƒ±'
    ];
    elements.archeryMessage.innerHTML = encouragements[Math.floor(Math.random() * encouragements.length)];
  }
}

function createLoveExplosion(x, y) {
  const explosion = document.createElement('div');
  explosion.className = 'love-explosion';
  explosion.innerHTML = 'üí•üíñüíïüíùüíò';
  explosion.style.left = x + 'px';
  explosion.style.top = y + 'px';
  explosion.style.fontSize = '30px';
  explosion.style.color = '#ff1744';
  
  elements.archeryContainer.appendChild(explosion);
  
  setTimeout(() => {
    explosion.remove();
  }, 2000);
}

function shootArrowAt(targetX, targetY) {
  const arrow = document.createElement('div');
  arrow.className = 'arrow';
  arrow.textContent = '‚û§';
  
  const bowX = 80;
  const bowY = 350;
  
  arrow.style.left = bowX + 'px';
  arrow.style.top = bowY + 'px';
  
  const deltaX = targetX - bowX;
  const deltaY = targetY - bowY;
  
  arrow.style.setProperty('--target-x', deltaX + 'px');
  arrow.style.setProperty('--target-y', deltaY + 'px');
  
  elements.archeryContainer.appendChild(arrow);
  
  setTimeout(() => {
    arrow.remove();
  }, 1500);
}

function updateArcheryDisplay() {
  elements.archeryTarget.textContent = gameState.archeryTarget;
  elements.archeryHits.textContent = gameState.archeryHits;
}

elements.shootArrow.addEventListener('click', () => {
  if (gameState.phase === 'archery') {
    let closestHeart = null;
    let minDistance = Infinity;
    
    gameState.archeryHearts.forEach(heartData => {
      if (!heartData.hit) {
        const distance = Math.sqrt(
          Math.pow(heartData.x - 80, 2) + Math.pow(heartData.y - 350, 2)
        );
        if (distance < minDistance) {
          minDistance = distance;
          closestHeart = heartData;
        }
      }
    });
    
    if (closestHeart) {
      shootArrowAt(closestHeart.x, closestHeart.y);
      setTimeout(() => {
        hitHeart(closestHeart);
      }, 700);
    } else {
      elements.archeryMessage.innerHTML = 'üéØ Hedef bekleniyor...';
    }
  }
});

elements.newArcheryRound.addEventListener('click', () => {
  if (gameState.phase === 'archery') {
    gameState.archeryHits = 0;
    updateArcheryDisplay();
    createHeartTargets();
    elements.archeryMessage.innerHTML = 'üèπ Yeni tur ba≈üladƒ±!';
  }
});


let carGameInterval;
let obstacleInterval;

function startCarGame() {
  gameState.phase = 'carDriving';
  gameState.carGameActive = true;
  elements.message.textContent = "Ehliyet pratiƒüi ba≈ülasƒ±n. Engellerden ka√ß";
  elements.carDrivingArea.style.display = 'flex';
  gameState.carDistance = 0;
  gameState.carPosition = 50;
  gameState.carObstacles = [];
  
  elements.carGameOver.style.display = 'none';
  elements.carLeft.disabled = false;
  elements.carRight.disabled = false;
  

  const existingObstacles = elements.carGameContainer.querySelectorAll('.obstacle');
  existingObstacles.forEach(obstacle => obstacle.remove());
  
  updateCarPosition();
  startCarGameLoop();
}

function updateCarPosition() {
  elements.playerCar.style.left = gameState.carPosition + '%';
}

function startCarGameLoop() {
  carGameInterval = setInterval(() => {
    if (!gameState.carGameActive) return;
    
    gameState.carDistance += 10;
    elements.carScore.textContent = `Mesafe: ${gameState.carDistance}m`;
    updateScore(2);
    

    checkCarCollisions();
    
    if (gameState.carDistance >= 500) {
      endCarGame(true); // Success
    }
  }, 500);
  
  obstacleInterval = setInterval(() => {
    if (gameState.carGameActive) {
      createObstacle();
    }
  }, 2000);
}

function createObstacle() {
  const obstacle = document.createElement('div');
  obstacle.className = 'obstacle';
  obstacle.textContent = ['üöß', 'üõë', '‚ö†Ô∏è'][Math.floor(Math.random() * 3)];
  
  const leftPosition = Math.random() * 250;
  obstacle.style.left = leftPosition + 'px';
  
  const obstacleData = {
    element: obstacle,
    x: leftPosition,
    y: -50
  };
  gameState.carObstacles.push(obstacleData);
  
  elements.carGameContainer.appendChild(obstacle);
  
  const obstacleUpdateInterval = setInterval(() => {
    obstacleData.y += 20;
    obstacle.style.top = obstacleData.y + 'px';
    
    if (obstacleData.y > 450) {
      clearInterval(obstacleUpdateInterval);
      if (obstacle.parentNode) {
        obstacle.remove();
      }
      const index = gameState.carObstacles.indexOf(obstacleData);
      if (index > -1) {
        gameState.carObstacles.splice(index, 1);
      }
    }
  }, 100);
}

function checkCarCollisions() {
  const carX = (gameState.carPosition / 100) * 300;
  const carY = 350; 
  
  gameState.carObstacles.forEach(obstacleData => {
    const obsX = obstacleData.x;
    const obsY = obstacleData.y;
    

    if (obsY > 320 && obsY < 380 && 
        Math.abs(carX - obsX) < 40) {
      endCarGame(false);
    }
  });
}

function endCarGame(success = true) {
  gameState.carGameActive = false;
  clearInterval(carGameInterval);
  clearInterval(obstacleInterval);
  

  elements.carLeft.disabled = true;
  elements.carRight.disabled = true;
  
  if (success) {
    elements.finalCarScore.innerHTML = `üèÅ Tebrikler! ${gameState.carDistance}m mesafe aldƒ±n!`;
    updateScore(50); 
    
    setTimeout(() => {
      elements.carDrivingArea.style.display = 'none';
      startSecretArea();
    }, 3000);
  } else {

    elements.finalCarScore.innerHTML = `üí• √áarptƒ±n! ${gameState.carDistance}m mesafe aldƒ±n`;
    elements.carGameOver.style.display = 'block';
  }
}

elements.carLeft.addEventListener('click', () => {
  if (gameState.phase === 'carDriving' && gameState.carGameActive) {
    gameState.carPosition = Math.max(10, gameState.carPosition - 15);
    updateCarPosition();
  }
});

elements.carRight.addEventListener('click', () => {
  if (gameState.phase === 'carDriving' && gameState.carGameActive) {
    gameState.carPosition = Math.min(90, gameState.carPosition + 15);
    updateCarPosition();
  }
});

elements.carRestartBtn.addEventListener('click', () => {
  startCarGame();
});


document.addEventListener('keydown', (e) => {
  if (gameState.phase === 'carDriving' && gameState.carGameActive) {
    if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
      gameState.carPosition = Math.max(10, gameState.carPosition - 15);
      updateCarPosition();
    } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
      gameState.carPosition = Math.min(90, gameState.carPosition + 15);
      updateCarPosition();
    }
  }
});


function startSecretArea() {
  gameState.phase = 'secret';
  elements.message.textContent = "Gizli b√∂l√ºme ho≈ü geldin!";
  elements.secretArea.style.display = 'flex';
  startFarmAnimals();
}

function startFarmAnimals() {
  elements.road.style.display = 'block';

}

elements.secretBtn.addEventListener('click', () => {
  if (gameState.phase === 'secret') {
    const secretMessages = [
      "üåü Seni √ßok seviyorum A≈ükƒ±mmm! üíñ",
      "üíñ Oyunun son hali nasƒ±l sence ?  üíñ",
      "üéä Sen benim hayatƒ±mƒ±n en g√ºzel hediyesisin ba≈üka hediyeye gerek yok üéä",
      "üíù Senin sesini duyunca y√ºz√ºmde g√ºller a√ßƒ±yor üíù",
      "üåπ g√∂zleri g√∂z deƒüil ahu üåπ"
    ];
    
    const randomMessage = secretMessages[Math.floor(Math.random() * secretMessages.length)];
    elements.secretMessage.innerHTML = randomMessage;
    
    updateScore(50);
    createConfetti();
    
    setTimeout(() => {
      elements.finalHeart.style.opacity = 1;
      elements.message.textContent = "Oyun tamamlandƒ± :d ‚ù§Ô∏è";
    }, 2000);
  }
});

// Confetti effect
function createConfetti() {
  const canvas = elements.confettiCanvas;
  const ctx = canvas.getContext('2d');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const confetti = [];
  const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffd93d', '#ff6b9d'];
  
  for (let i = 0; i < 100; i++) {
    confetti.push({
      x: Math.random() * canvas.width,
      y: Math.random() * canvas.height - canvas.height,
      w: Math.random() * 10 + 5,
      h: Math.random() * 10 + 5,
      color: colors[Math.floor(Math.random() * colors.length)],
      speed: Math.random() * 3 + 2,
      angle: Math.random() * Math.PI * 2,
      angularSpeed: Math.random() * 0.2 + 0.1
    });
  }
  
  function animateConfetti() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    confetti.forEach((piece, index) => {
      ctx.save();
      ctx.translate(piece.x + piece.w / 2, piece.y + piece.h / 2);
      ctx.rotate(piece.angle);
      ctx.fillStyle = piece.color;
      ctx.fillRect(-piece.w / 2, -piece.h / 2, piece.w, piece.h);
      ctx.restore();
      
      piece.y += piece.speed;
      piece.angle += piece.angularSpeed;
      
      if (piece.y > canvas.height) {
        confetti.splice(index, 1);
      }
    });
    
    if (confetti.length > 0) {
      requestAnimationFrame(animateConfetti);
    } else {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
    }
  }
  
  animateConfetti();
}

</script>

</body>
</html>